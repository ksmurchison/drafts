<?xml version="1.0" encoding="US-ASCII"?>

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<!-- Getting references from the online citation library.
     There has to be one entity for each item to be referenced. -->
<!ENTITY rfc2119 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY rfc8174 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.8174.xml">

<!ENTITY rfc2026 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2026.xml">
<!ENTITY rfc5321 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5321.xml">
<!ENTITY rfc5322 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.5322.xml">
<!ENTITY rfc6648 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.6648.xml">

<!ENTITY rfc0822 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.0822.xml">
<!ENTITY rfc1341 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1341.xml">
<!ENTITY rfc2045 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2045.xml">
<!ENTITY rfc2821 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2821.xml">
<!ENTITY rfc2822 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2822.xml">
<!ENTITY rfc7085 PUBLIC '' "http://xml.resource.org/public/rfc/bibxml/reference.RFC.7085.xml">
<!ENTITY ID.RFC5321bis PUBLIC ''
 "http://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-emailcore-rfc5321bis.xml">
<!ENTITY ID.RFC5322bis PUBLIC ''
 "http://xml2rfc.tools.ietf.org/public/rfc/bibxml3/reference.I-D.ietf-emailcore-rfc5322bis.xml">
<!--
 &lt;!ENTITY rfc1425 PUBLIC ''
  "http://xml.resource.org/public/rfc/bibxml/reference.RFC.1425.xml"&gt;
     ... does not work.  See
     ... https://trac.tools.ietf.org/tools/xml2rfc/trac/ticket/502
     ... 2020-03-20 -->


<!-- Fudge for XMLmind which doesn't have this built in -->
<!ENTITY nbsp "&#160;">

]>
<!-- Extra statement used by XSLT processors to control the output style. -->
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!-- Processing Instructions- PIs (for a complete list and description,
     see file http://xml.resource.org/authoring/README.html.
     You may find that some sphisticated editors are not able to edit PIs when palced here.
     An alternative position is just inside the rfc elelment as noted below. -->
<!-- Some of the more generally applicable PIs that most I-Ds might want to use -->
<!-- Try to enforce the ID-nits conventions and DTD validity -->
<?rfc strict="yes" ?>
<!-- Items used when reviewing the document -->
<!-- Controls display of <cref> elements -->
<?rfc comments="yes" ?>
<!-- When no, put comments at end in comments section,
     otherwise, put inline -->
<?rfc inline="yes" ?>
<!-- When yes, insert editing marks: editing marks consist of a 
     string such as <29> printed in the blank line at the 
     beginning of each paragraph of text. -->
<?rfc editing="no" ?>
<!-- Create Table of Contents (ToC) and set some options for it.  
     Note the ToC may be omitted for very short documents,but idnits insists on a ToC 
     if the document has more than 15 pages. -->
<?rfc toc="yes"?>
<?rfc tocompact="yes"?>
<!-- If "yes" eliminates blank lines before main section entries. -->
<?rfc tocdepth="3"?>
<!-- Sets the number of levels of sections/subsections... in ToC.
   Can be overridden by 'toc="include"/"exclude"' on the section
   element-->
<!-- Choose the options for the references. 
     Some like symbolic tags in the references (and citations) and others prefer 
     numbers. The RFC Editor always uses symbolic tags.
     The tags used are the anchor attributes of the references. -->
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<!-- If "yes", causes the references to be sorted in order of tags.
			 This doesn't have any effect unless symrefs is "yes"
          also. --> 
<!-- These two save paper: Just setting compact to "yes" makes savings by not starting each 
     main section on a new page but does not omit the blank lines between list items. 
     If subcompact is also "yes" the blank lines between list items are also omitted. -->
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<!-- end of list of popular I-D processing instructions -->

<!-- Information about the document.
     category values: std, bcp, info, exp, and historic
     For Internet-Drafts, specify attribute "ipr".
         original ipr values are: full3978, noModification3978, noDerivatives3978), 
         2008 IETF Trust versions: trust200811, noModificationTrust200811, noDerivativeTrust200811
         2009/Current: trust200902, noModificationTrust200902, noDerivativesTrust200902, pre5378Trust200902
     Also for Internet-Drafts, you must specify a value for attributes "docName" which is 
        typically the file name under which it is filed but need not be.
     If relevant, "iprExtract" may be specified to denote the anchor attribute value of a
        section that can be extracted for separate publication, it is only useful when the value
        of "ipr" does not give the Trust full rights.
     "updates" and "obsoletes" attributes can also be specified here, their arguments are
        comma-separated lists of RFC numbers (just the numbers) -->

<!-- This is -00b, the posting draft -->
<rfc  docName="draft-ietf-emailcore-as-03"
     ipr="trust200902"  category="std">
     <!-- obsoletes='2821, 821' updates='1123'
        category='std' (bcp, info, exp, historic)  -->   


  <!-- ***** FRONT MATTER ***** -->

  <front>

    <title abbrev="Core Email A/S">Applicability Statement for IETF
	   Core Email Protocols</title>

    <!-- add 'role="editor"' below for the editors if appropriate -->
    <author fullname="John C Klensin" initials="J.C."
			 surname="Klensin" role="editor">
      <organization/>
      <address>
        <postal>
          <street>1770 Massachusetts Ave, Ste 322</street>
          <city>Cambridge</city> <region>MA</region>
          <code>02140</code>
          <country>USA</country>
        </postal>
        <phone>+1 617 245 1457</phone>
        <email>john-ietf@jck.com</email>
      </address>
    </author>

    <author initials="K." surname="Murchison"
	    fullname="Kenneth Murchison" role="editor"> 
      <organization abbrev="Fastmail">Fastmail US LLC</organization>
      <address>
	<postal>
	  <street>1429 Walnut Street - Suite 1201</street>
	  <city>Philadelphia</city> <region>PA</region>
	  <code>19102</code> <country>USA</country>
	</postal>
	<email>murch@fastmailteam.com</email>
      </address>
    </author>
	
    <author initials="E." surname="Sam" fullname="E Sam" role="editor">
      <organization/>
      <address>
	<email>winshell64@gmail.com </email>
      </address>
    </author>

    <date />

    <!-- Meta-data Declarations -->
    <area>ART</area>
    <workgroup> EMAILCORE </workgroup>	

    <!-- WG name at the upper left corner of the doc,
         IETF fine for individual submissions.  You can also
         omit this element in which case it defaults to "Network Working Group" -
         a hangover from the ancient history of the IETF!
         <workgroup>Network Working Group</workgroup>   -->

    <!-- You can add <keyword/> elements here.  They will be incorporated into HTML output
         files in a meta tag but they have no effect on text or nroff output. -->
    <!-- <keyword>Text</keyword> (as many of those elements as needed -->

	
    <abstract>
      <t> Electronic mail is one of the oldest Internet
      applications that is still in very active use.  While the
      basic protocols and formats for mail transport and message
      formats have evolved slowly over the years, events and
      thinking in more recent years have supplemented those core
      protocols with additional features and suggestions for their
      use.
      This Applicability Statement describes the relationship
      among many of those protocols and provides guidance and
      makes recommendations for the use of features of the core
      protocols.</t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
      <t> In its current form, this draft is a placeholder and
      beginning of an outline for the Applicability Statement that has
      been discussed as a complement for proposed revisions of the
      base protocol specifications for SMTP <xref target="RFC5321"/>
      (being revised as <xref target="I-D.ietf-emailcore-rfc5321bis"/>)
      and Internet Message Format <xref target="RFC5322"/>
      (being revised as <xref target="I-D.ietf-emailcore-rfc5322bis"/>).
      Among other things, it is expected to capture topics that a
      potential WG concludes are important but that should not become
      part of those core documents.</t>
	  
      <t> As discussed in <xref target="RFC2026"/>,
      <!-- Section 3.2 and maybe 7 if we can settle how to reference those -->
      <list hangIndent="5" style="empty">
	<t>"An Applicability Statement specifies how, and under what
	circumstances, one or more TSs may be applied to support
	a particular Internet capability."</t></list>
	That form of a standards track document is appropriate
	because one of the roles of such a document is to explain the
	relationship among technical specifications, describe how they
	are used together, and make statements about what is
	"required, recommended, or elective".</t>
	  
        <t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in
	<xref target="RFC2119"/> and
	<xref target="RFC8174"/>.</t>

      </section>

      <section title="Applicability of Some SMTP Provisions">
	<t> Over the years since RFC 5321 was published in October
	2008, usage of SMTP has evolved, machines and 
	network speeds have increased, and the frequency with which
	SMTP senders and receivers have to be prepared to deal with
	systems that are disconnected from the Internet for long
	periods or that require many hops to reach has decreased.
	During the same period, the IETF

	<!-- Could say "Internet" above, but I'm not sure it would be true -->

	has become much more sensitive to privacy and security
	issues and the need to be more resistant or robust against
	spam and other attacks.  In addition SMTP (and Message
	Format) extensions have been introduced that are expected to
	evolve the Internet's mail system to better accommodate
	environments in which Basic Latin Script is not the
	norm.</t>

	<t> This section describes adjustments
	that may be appropriate for SMTP under various circumstances
	and discusses the applicability of other protocols that
	represent newer work or that are intended to deal with
	relatively newer issues.</t>

        <section
            title="Handling of the Domain Argument to the EHLO Command">
          <t> If the <spanx style='verb'>Domain</spanx> argument to
          the EHLO command does not have an address record in the
          DNS that matches the IP address of the client, the SMTP
          server may refuse any mail from the client as part of
          established anti-abuse practice.
          Operational experience has demonstrated that the lack of
          a matching address record for the the domain name
          argument is at best an indication of a poorly-configured
          MTA, and at worst that of an abusive host. </t>
        </section>

        <section title="Use of Address Literals">
          <t> The <spanx style='verb'>address-literal</spanx> ABNF
          non-terminal is used in various places in
          <xref target="I-D.ietf-emailcore-rfc5321bis" /> grammar
          however, for SMTP connections over the public internet,
          an <spanx style='verb'>address-literal</spanx>
          as the argument to EHLO command or the
          <spanx style='verb'>Domain</spanx> part of the
          <spanx style='verb'>Mailbox</spanx> argument to the MAIL
          FROM command is quite likely to result in the message
          being rejected as a matter of policy at many sites, since
          they are deemed to be signs of at best a misconfigured
          server, and at worst either a compromised host or a
          server that's intentionally configured to hide its
          identity. </t>
        </section>

        <section title="Use of Addresses in Top-Level Domains">
          <t> While addresses in top-level domains (TLDs) are
          syntactically valid, mail to these addresses has never
          worked reliably.
          A handful of country code TLDs have top level MX records but
          they have never been widely used nor 
          well supported. In 2013 <xref target="RFC7085" /> found 18
          TLDs with MX records, which dropped to 17 in 2021 despite
          many new TLDs having been added. </t>

          <t> Mail sent to addresses with single label domains has
          typically expected the address to be an abbreviation to be
          completed by a search list, so mail to bob@sales would be
          completed to bob@sales.example.com.
          This shortcut has led to unfortunate consequnces; in one
          famous case, in 1991 when the .CS domain was added to the
          root, mail in computer science departments started to fail
          as mail to bob@cs was now treated as mail to
          Czechoslovakia.
          Hence, for reliable service, mail SHOULD NOT use addreses
          that contain single label domains. </t>
        </section>
      </section>

      <section title="Applicability of Message Format Provisions">
        <t> This section describes adjustments to the Internet Message
        Format that may be appropriate under various circumstances. </t>

        <section title="Use of Empty Quoted Strings">
          <t>
            The <spanx style='verb'>quoted-string</spanx> ABNF
            non-terminal is used in various places in rfc5322bis
            grammar.
            While it allows for empty quoted string, such construct is
            going to cause interoperability issues when used in certain
            header fields.
            In particular, use of empty quoted  strings is NOT
            RECOMMENDED in "received-token" (a component of a Received
            header field), "keywords" (a component of a Keywords header
            field) and "local-part" (left hand side of email addresses).
            Use of empty quoted strings is in particular problematic in
            the "local-part".
            For example, all of the following email addresses are non
            interoperable: 
          </t>
          <t>"".bar@example.com </t>
          <t>foo.""@example.net</t>
          <t>""@example.com</t>
          <t>Use of empty quoted strings is fine in "display-name".</t>
        </section>
      </section>

      <section title="MIME and Its Implications">
	<t>When the work leading to the original version of the
	MIME specification was 
	completed in 1992 <xref target="RFC1341"/>, the intention
	was that it be kept separate from the specification for
	basic mail headers in <xref target="RFC0822">RFC 822</xref>.
	That plan was carried forward into RFC 822's successors,
	<xref target="RFC2822"/> and
	<xref target="RFC5322"/> and the successors of
	that original MIME specification including
	<xref target="RFC2045"/>. The decision to do
	so was different from the one made for SMTP, for which the
	core specification was changed to allow for the extension
	mechanism <xref target="RFC1425"/> which was then
	incorporated into RFC 5321 and its predecessor <xref
        target="RFC2821"/>.</t>

        <t>Various uses of MIME have become nearly ubiquitous in
	contemporary email while others may have fallen into disuse
	or been repurposed from the intent of their original design.</t>
        <t> It may be appropriate to make some clear statements about
        the applicability of MIME and its features.</t> 
      </section>

      <section title="Other Stuff">
	<t> It is fairly clear that there will be things that do not
	fit into the sections outlined above.  As one example, if
	the IETF wants to say something specific about signatures
	over headers or what (non-trace) headers may reasonably be
	altered in transit, that may be more appropriate to other
        sections than to any of the three suggested above.</t>
      </section>
	   

      <section anchor="Acknowledgments" title="Acknowledgments">
        <t>The Emailcore group arose out of discussions on the
        ietf-smtp group over changes and additions that should be made
        to the core email protocols.
        It was agreed upon that it was time to create a working group
        that would fix many potential errors and opportunities for
        misunderstandings within the RFCs.</t>
      </section>

    <!-- Possibly a 'Contributors' section ... -->

    <section anchor="IANA" title="IANA Considerations">
      <t>This memo includes no requests to or actions for IANA.  The
      IANA registries associated with the protocol specifications
      it references are specified in their respective documents.</t>
    </section>

    <section anchor="Security" title="Security Considerations">
      <t>All drafts are required to have a security considerations
      section and this one eventually will.</t>
      <t> ... To be supplied ... </t>
    </section>
  </middle>

  <!--  *****BACK MATTER ***** -->

  <back>

    <references title="Normative References">

	  &rfc2119;
	  &rfc8174;
	  &rfc2026;
	  &rfc2045;  <!-- MIME -->

<!-- the following is the minimum to make xml2rfc happy -->	  
   <!--   <reference anchor="min_ref">

        <front>
          <title>Minimal Reference</title>
          <author initials="authInitials" surname="authSurName">
            <organization></organization>
	        <address/>
          </author>
          <date year="2006" />
        </front>
      </reference>  -->
    </references>

    <references title="Informative References">

      &rfc1341;  <!-- MIME -->
      &rfc0822;
      &rfc2822;
      &rfc2821;

      &rfc5321;
      &rfc5322;

      &rfc7085;

      &ID.RFC5321bis;
      &ID.RFC5322bis;

      <reference anchor="RFC1425"
		 target="https://www.rfc-editor.org/info/rfc1425">
	<!-- as of 2020-03-20 bibxml entry does not work - see Entity above -->
        <front>
          <title>SMTP Service Extensions</title>
          <author initials="J." surname="Klensin" fullname="J. Klensin">
            <organization> WG Chair </organization> <!-- faked -->
          </author>
	  <author initials="N." surname="Freed" fullname="N. Freed" role="editor">
	    <organization/>
          </author>
          <author initials="M." surname="Rose" fullname="M. Rose">
            <organization/>
          </author>
          <author initials="E." surname="Stefferud" fullname="E. Stefferud">
	    <organization/>
	  </author>
	  <author initials="D." surname="Crocker" fullname="D. Crocker">
	    <organization/>
          </author>
          <date year="1993" month="February"/>
        </front>
      </reference>
	  
      <!-- Right back at the beginning we defined an entity which (we asserted) would contain
             XML needed for a reference... this is where we use it. -->

      <!-- A reference written by by an organization not a person. 
           NOTE: This reference is not referenced: this is immoral in I-Ds and RFCs, but may not
	   be in other technical documents. It will be flagged when strict="yes". -->

   <!--      <reference anchor="DOMINATION"
                 target="http://www.example.com/dominator.html">
        <front>
          <title>Ultimate Plan for Taking Over the World</title>
          <author>
            <organization>Mad Dominators, Inc.</organization>
          </author>
          <date year="1984" />
        </front>
      </reference>  -->
	   
    </references>


<!--   Sections below here become  Appendices.  -->
	
    <section title="Change Log" anchor="ChangeLog">
      <t>RFC Editor: Please remove this appendix before publication.</t>

      <section title="Changes from draft-klensin-email-core-as-00
                      (2020-03-30) to draft-ietf-emailcore-as-00">
        <t><list style="symbols">
	  <t> Change of filename, metadata, and date to reflect
	  transition to WG document for new emailcore WG.  No
	  other substantive changes </t>
	</list></t>
      </section>
	
      <section
          title="Changes from draft-ietf-emailcore-as-00 (2020-10-06) to -01">
        <t><list style="symbols">
	  <t>Added co-authors (list is in alphabetical order for
	  the present). </t>
	  <t> Updated references to 5321bis and 5322bis. </t>
	  <t> Added note at top, "This version is provided as a
	  document management convenience to update the author
	  list and make an un-expired version available to the
	  WG.  There are no substantive changes from the prior
	  version", which should be removed for version -02.</t>
	</list></t>
      </section>

      <section
          title="Changes from draft-ietf-emailcore-as-01 (2021-04-09) to -02">
        <t><list style="symbols">
          <t> Added new editors and also added some issues the
          emailcore group will be dealing with. </t>
          <t> Added reference to RFC 6648.</t>
        </list></t>
      </section>

      <section
          title="Changes from draft-ietf-emailcore-as-02 (2021-08-06) to -03">
        <t><list style="symbols">
          <t> Moved discussion of address-literals (issue #1) and
          domain names in EHLO (issue #19) under SMTP Provisions
          section</t>
          <t> Moved discussion of empty quoted-strings under
          Message Format Provisions section</t>
          <t> Added text on use of addresses in TLDs (issue #50) </t>
          <t> Marked all authors as editors. </t>
          <t> Miscellaneous editorial changes. </t>
        </list></t>
      </section>
	
    </section>

  </back>
</rfc>
